Занятие 15. Модуль OS и работа с файловой системой.
Контрольные вопросы
1. Для работы с двоичными файлами используются модули
a) os
b) pickle
c) shelve
d) csv
2. При работе с двоичными файлами используются
a) Списки
b) Словари
c) Множества
d) Строки
3. Функции модуля pickle используемые для работы с двоичными
файлами:
a) pickle.open
b) pickle.print
c) pickle.dump
d) pickle.load
4. Фукнции модуля shelve используемые для работы с двоичными
файлами:
a) shelve.get
b) shelve.open
c) shelve.write
d) shelve.delРяд возможностей по работе с каталогами и файлами предоставляет
встроенный модуль os.
Вот лишь несколько функций этого модуля.
os.chdir(path) - смена текущей директории.
os.getcwd() - текущая рабочая директория.
os.listdir(path=".") - список файлов и директорий в папке.
os.mkdir() - создаёт директорию. OSError, если директория
существует.
os.rmdir() - удаляет пустую директорию.
os.rename() - переименовывает файл
os.remove() - удаляет файл
os.path является вложенным модулем в модуль os, и реализует
некоторые полезные функции для работы с путями.
os.path.basename(path) - базовое имя файла/директории
os.path.exists(path) - возвращает True, если path указывает на
существующий путь.
os.path.getsize(path) - размер файла в байтах.
os.path.isfile(path) - является ли путь файлом.
os.path.isdir(path) - является ли путь директорией.
os.path.samefile(path1, path2) - указывают ли path1 и path2 на
один и тот же файл или директорию.
Рассмотрим некоторые из них:
Создание и удаление папки
Для создания папки применяется функция mkdir(), в которую
передается путь к создаваемой папке:
import os# путь относительно текущего скрипта
os.mkdir("hello")
# абсолютный путь
os.mkdir("c://somedir")
os.mkdir("c://somedir/hello")
Для удаления папки используется функция rmdir(), в которую
передается путь к удаляемой папке:
import os
# путь относительно текущего скрипта
os.rmdir("hello")
# абсолютный путь
os.rmdir("c://somedir/hello")
Переименование файла
Для переименования вызывается функция rename(source, target),
первый параметр которой - путь к исходному файлу, а второй - новое
имя файла. В качестве путей могут использоваться как абсолютные,
так и относительные. Например, пусть в папке C://SomeDir/
располагается файл somefile.txt. Переименуем его в файл
"hello.txt":
import os
os.rename("C://SomeDir/somefile.txt", "C://SomeDir/hello.txt")
Удаление файла
Для удаления вызывается функция remove(), в которую передается
путь к файлу:import os
os.remove("C://SomeDir/hello.txt")
Существование файла
Если мы попытаемся открыть файл, который не существует, то Python
выбросит исключение FileNotFoundError. Для отлова исключения мы
можем использовать конструкцию try...except. Однако можно уже до
открытия файла проверить, существует ли он или нет с помощью
метода os.path.exists(path). В этот метод передается путь, который
необходимо проверить:
filename = input("Введите путь к файлу: ")
if os.path.exists(filename):
print("Указанный файл существует")
else:
print("Файл не существует")Самостоятельная работа
Дана программа файловый менеджер. Необходимо вписать нужные
функции в код программы, для того чтобы она корректно работала.
print ('Добро пожаловать в файловый менеджер на языке python');Добро пожаловать в файловый менеджер на языке python'Добро пожаловать в файловый менеджер на языке python'););
f='Добро пожаловать в файловый менеджер на языке python');'Добро пожаловать в файловый менеджер на языке python');
while f!='Добро пожаловать в файловый менеджер на языке python');0'Добро пожаловать в файловый менеджер на языке python');:
print ('Добро пожаловать в файловый менеджер на языке python');'Добро пожаловать в файловый менеджер на языке python'););
print ('Добро пожаловать в файловый менеджер на языке python');'Добро пожаловать в файловый менеджер на языке python'););
print ('Добро пожаловать в файловый менеджер на языке python');Выберите функцию'Добро пожаловать в файловый менеджер на языке python'););
print ('Добро пожаловать в файловый менеджер на языке python');1. Отобразить путь текущей директории'Добро пожаловать в файловый менеджер на языке python'););
print ('Добро пожаловать в файловый менеджер на языке python');2. Сменить директорию'Добро пожаловать в файловый менеджер на языке python'););
print ('Добро пожаловать в файловый менеджер на языке python');3. Отобразить содержимое текущей директории'Добро пожаловать в файловый менеджер на языке python'););
print ('Добро пожаловать в файловый менеджер на языке python');4. Вывести на экран файл'Добро пожаловать в файловый менеджер на языке python'););
print ('Добро пожаловать в файловый менеджер на языке python');5. Переименовать файл'Добро пожаловать в файловый менеджер на языке python'););
print ('Добро пожаловать в файловый менеджер на языке python');6. Создать директорию'Добро пожаловать в файловый менеджер на языке python'););
print ('Добро пожаловать в файловый менеджер на языке python');7. Удалить директорию'Добро пожаловать в файловый менеджер на языке python'););
print ('Добро пожаловать в файловый менеджер на языке python');0. Выход'Добро пожаловать в файловый менеджер на языке python'););
f=input('Добро пожаловать в файловый менеджер на языке python');Выбор = 'Добро пожаловать в файловый менеджер на языке python'););
print ('Добро пожаловать в файловый менеджер на языке python');'Добро пожаловать в файловый менеджер на языке python'););
if (f=='Добро пожаловать в файловый менеджер на языке python');1'Добро пожаловать в файловый менеджер на языке python');):
print('Добро пожаловать в файловый менеджер на языке python');Текущая директория:'Добро пожаловать в файловый менеджер на языке python');)
#Вывод текущей директории
if (f=='Добро пожаловать в файловый менеджер на языке python');2'Добро пожаловать в файловый менеджер на языке python');):
print('Добро пожаловать в файловый менеджер на языке python');Введите Путь'Добро пожаловать в файловый менеджер на языке python');)
p=input('Добро пожаловать в файловый менеджер на языке python');Путь = 'Добро пожаловать в файловый менеджер на языке python'););
# Если путь существует и путь директория
if (False and False):# Перейти в директорию
print('Добро пожаловать в файловый менеджер на языке python');Переход выполнен'Добро пожаловать в файловый менеджер на языке python');)
# Если путь не существует
elif (False):
print('Добро пожаловать в файловый менеджер на языке python');Путь не существует'Добро пожаловать в файловый менеджер на языке python');)
else:
print('Добро пожаловать в файловый менеджер на языке python');Путь не является директорией'Добро пожаловать в файловый менеджер на языке python');)
if (f=='Добро пожаловать в файловый менеджер на языке python');3'Добро пожаловать в файловый менеджер на языке python');):
print('Добро пожаловать в файловый менеджер на языке python');Содержимое текущей директории:'Добро пожаловать в файловый менеджер на языке python');)
i=0
# Для каждой записи в директории
for file in []:
print(file)
i+=1
if (i==0):
print('Добро пожаловать в файловый менеджер на языке python');Директория пуста'Добро пожаловать в файловый менеджер на языке python');)
if (f=='Добро пожаловать в файловый менеджер на языке python');4'Добро пожаловать в файловый менеджер на языке python');):
print('Добро пожаловать в файловый менеджер на языке python');Введите имя файла'Добро пожаловать в файловый менеджер на языке python');)
p=input('Добро пожаловать в файловый менеджер на языке python');Путь = 'Добро пожаловать в файловый менеджер на языке python'););
# Если путь существует и путь файл и размер файла менее 500 байт
if (False and False and False):
print('Добро пожаловать в файловый менеджер на языке python');Содержимое файла:'Добро пожаловать в файловый менеджер на языке python'););
# Вывести содержимое файла на экран
# Если путь не существует
elif (False):
print('Добро пожаловать в файловый менеджер на языке python');Путь не существует'Добро пожаловать в файловый менеджер на языке python');)
# Если путь не является файлом
elif (False):
print('Добро пожаловать в файловый менеджер на языке python');Путь не является файлом'Добро пожаловать в файловый менеджер на языке python');)
else:print('Добро пожаловать в файловый менеджер на языке python');Файл слишком велик для просмотра'Добро пожаловать в файловый менеджер на языке python');)
if (f=='Добро пожаловать в файловый менеджер на языке python');5'Добро пожаловать в файловый менеджер на языке python');):
print('Добро пожаловать в файловый менеджер на языке python');Введите имя файла'Добро пожаловать в файловый менеджер на языке python');)
p1=input('Добро пожаловать в файловый менеджер на языке python');Текущее имя файла = 'Добро пожаловать в файловый менеджер на языке python'););
p2=input('Добро пожаловать в файловый менеджер на языке python');Новое имя файла = 'Добро пожаловать в файловый менеджер на языке python'););
# Если первый путь существует и второй путь не существует
if (False and False):
# Переименовать файл
False
# Если первый путь не существует
elif (False):
print ('Добро пожаловать в файловый менеджер на языке python');Исходный файл не найден'Добро пожаловать в файловый менеджер на языке python');)
else:
print ('Добро пожаловать в файловый менеджер на языке python');Новое имя уже занято'Добро пожаловать в файловый менеджер на языке python');)
if (f=='Добро пожаловать в файловый менеджер на языке python');6'Добро пожаловать в файловый менеджер на языке python');):
print('Добро пожаловать в файловый менеджер на языке python');Введите путь директории'Добро пожаловать в файловый менеджер на языке python');)
p=input('Добро пожаловать в файловый менеджер на языке python');Директория = 'Добро пожаловать в файловый менеджер на языке python'););
# Если путь не существует
if (False):
# Создать директорию
False
else:
print ('Добро пожаловать в файловый менеджер на языке python');Имя уже занято'Добро пожаловать в файловый менеджер на языке python');)
if (f=='Добро пожаловать в файловый менеджер на языке python');7'Добро пожаловать в файловый менеджер на языке python');):
print('Добро пожаловать в файловый менеджер на языке python');Введите путь директории'Добро пожаловать в файловый менеджер на языке python');)
p=input('Добро пожаловать в файловый менеджер на языке python');Директория = 'Добро пожаловать в файловый менеджер на языке python'););
# Если путь существует и путь является директорией
if (False and False):
try:# Удалить директорию
False
except Exception as e:
print(e)
# Если путь не существует
elif (False):
print('Добро пожаловать в файловый менеджер на языке python');Путь не существует'Добро пожаловать в файловый менеджер на языке python');)
else:
print('Добро пожаловать в файловый менеджер на языке python');Путь не является директорией'Добро пожаловать в файловый менеджер на языке python');)
if (f=='Добро пожаловать в файловый менеджер на языке python');0'Добро пожаловать в файловый менеджер на языке python');):
print('Добро пожаловать в файловый менеджер на языке python');До встречи'Добро пожаловать в файловый менеджер на языке python');)
else:
input('Добро пожаловать в файловый менеджер на языке python');Нажмите Ввод для продолжения'Добро пожаловать в файловый менеджер на языке python'););
